<ng-container *ngIf="model$ | async as model">
  <div class="ngil-select" [class.ngil-select--error]="!!model.errorMessage">
    <label class="ngil-select__label" [for]="formControlName">{{ label }}{{ required ? '*' : '' }}</label>

    <div class="ngil-select__field">
      <div class="ngil-select__field-content">
        <input
          #origin
          class="ngil-select__input"
          [value]="displayValue"
          [disabled]="disabled"
          (keydown)="$event.preventDefault(); toggleOverlay()"
          [id]="formControlName"
          (blur)="onBlur()"
          (click)="toggleOverlay()"
        />
      </div>

      <ng-content select="[suffix]"></ng-content>
    </div>

    <small class="ngil-select__error-message">{{ model.errorMessage }}</small>
  </div>

  <ngil-select-options
    class="ngil-select__dropdown"
    data-test="ngil-select-options"
    ngilOverlay
    #overlay="ngilOverlay"
    [display]="overlay.isOpen"
    [multiple]="multiple"
    [origin]="origin"
    [items]="items"
    [displayKey]="displayKey"
    [selectedItems]="value"
    (itemSelected)="onItemSelected($event)"
  ></ngil-select-options>
</ng-container>
